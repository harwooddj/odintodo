(()=>{"use strict";class t{constructor(t){this.type="project",this.title=t}}class e{constructor(t,e,o,d){this.type="todo",this.title=t,this.description=e,this.project=o,this.due=d}}class o{projects=[]}const d=document.getElementById("todo-plus"),n=document.getElementById("project-plus"),l=document.getElementById("form-add-todo"),c=document.getElementById("form-add-project"),s=document.querySelector(".form-add-todo-container"),i=document.querySelector(".form-add-project-container"),r=document.querySelector(".todo-list"),a=document.querySelector(".project-list"),p=document.getElementById("select"),u=document.getElementById("form-todo-but-tick"),m=document.getElementById("form-project-but-tick"),g=new o,h=new class{todos=[]};function y(t){t.style.display="block"}function f(t){t.style.display="none"}function j(){a.innerHTML="",g.projects.length&&(g.projects.sort(((t,e)=>t.title>e.title?1:t.title<e.title?-1:0)),g.projects.forEach((t=>{let e=document.createElement("div"),o=document.createElement("h1");e.textContent=t.title,e.id="project_"+g.projects.indexOf(t),e.classList.add("project"),o.id="del-project",o.classList.add("material-icons"),o.textContent="delete_outlined",o.classList.add("del"),e.appendChild(o),a.appendChild(e)})))}function E(){p.innerHTML="",g.projects.forEach((t=>{let e=document.createElement("option");e.textContent=t.title,p.appendChild(e)}))}function I(){r.innerHTML="",h.todos.length&&h.todos.forEach((t=>{let e=document.createElement("div"),o=document.createElement("p"),d=document.createElement("p"),n=document.createElement("h1");e.id="todo_"+h.todos.indexOf(t),e.classList.add("todo"),o.textContent=t.title,d.textContent=t.due,n.classList.add("material-icons"),n.id="del-todo",n.textContent="delete_outlined",n.classList.add("del"),e.appendChild(o),e.appendChild(d),e.appendChild(n),r.appendChild(e)}))}function C(){localStorage.clear();let t=g.projects.concat(h.todos);t.length&&t.forEach((e=>{localStorage.setItem(t.indexOf(e),JSON.stringify(e))}))}!function(){o.projects=[],h.todos=[];let d=Object.keys(localStorage);d.length&&d.forEach((o=>{let d=JSON.parse(localStorage.getItem(o));if("project"==d.type){let e=new t(d.title);g.projects.push(e)}else if("todo"==d.type){let t=new e(d.title,d.description,d.project,d.due);h.todos.push(t)}}),this)}(),E(),j(),I(),document.addEventListener("click",(o=>{var r;"none"!=l.style.display&&(l.contains(o.target)?o.target==u&&(function(t,o,d,n){let l=new e(t,o,d,n);h.todos.push(l),C(),I()}(document.getElementById("todo-title").value,document.getElementById("todo-description").value,document.getElementById("select").value,document.getElementById("due-date").value),f(s)):f(s)),o.target==d&&y(s),"none"!=c.style.display&&(c.contains(o.target)?o.target==m&&(function(e){let o=new t(e);g.projects.push(o),C(),j(),E()}(document.getElementById("project-title").value),f(i)):f(i)),o.target==n&&y(i),"del-project"==o.target.id&&confirm("All todos related to this project will be deleted!")&&function(t){let e=g.projects[t].title;for(let t=0;t<h.todos.length;t++)h.todos[t].project==e&&h.todos.splice(t,1);g.projects.splice(t,1),C(),j(),I()}(o.target.parentElement.id.slice(8)),"del-todo"==o.target.id&&(r=o.target.parentElement.id.slice(5),h.todos.splice(r,1),C(),I())}))})();